@model IEnumerable<TouristGuide.Models.Attraction>
@using TouristGuide.Helpers

@{
    ViewBag.Title = "Attractions";
}

@if (Request.IsAuthenticated && HttpContext.Current.User.IsInRole("admin"))
{
    <p>@Html.ActionLink("Add attraction", "Create")</p>
}

<div class="center border-bottom search-cat">
<form action="/Attraction/Index" method="get">
    Country: <input type="text" name="country" />
    City/Region: <input type="text" name="place" />
    Attraction: <input type="text" name="attraction" />
    <input type="submit" value="Filter" />
</form>
</div>

@foreach (var item in Model)
{
    <div class="post">
	    <h1 class="title">@item.Name</h1>
	    <p>@Html.Raw(Html.Truncate(item.Description,200))</p>
        @Html.ActionLink("Read more", "Details", new {id = item.ID}, new { @class = "more" })
        @if (Request.IsAuthenticated && HttpContext.Current.User.IsInRole("admin"))
        {
            <text>|</text>
            @Html.ActionLink("Edit", "Edit", "Attraction", new { id = item.ID }, null)
            <text>|</text>
            @Html.ActionLink("Delete", "Delete", "Attraction", new { id = item.ID }, null)
        }
    </div>
}

<div class="center">
@for (int i = 0; i < ViewBag.PagesCount; ++i)
{
    if ((i + 1) == ViewBag.CurrentPage)
    {
        <b>@Html.ActionLink("[" + (i + 1).ToString() + "]", "Index", new { start = 10 * i + 1 })</b><text>&nbsp;</text>
    }
    else
    {
        @Html.ActionLink("[" + (i + 1).ToString() + "]", "Index", new { start = 10 * i + 1 }) <text>&nbsp;</text>
    }
}
</div>
